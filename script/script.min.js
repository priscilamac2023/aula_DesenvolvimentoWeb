function toggleMenu(){document.getElementById("navMenu").classList.toggle("show")}function closeMenu(){document.getElementById("navMenu").classList.remove("show")}function sectionScroll(sectionId){const section=document.getElementById(sectionId);if(!section)return;const sectionPosition=section.offsetTop-70;window.scrollTo({top:sectionPosition,behavior:"smooth"}),closeMenu()}function handleMenuLinkClick(event){event.target.closest("a")&&closeMenu()}function handleThemeToggle(){const body=document.body,toggleBtn=document.getElementById("themeToggle");body.classList.toggle("dark-theme");const isDark=body.classList.contains("dark-theme");toggleBtn.textContent=isDark?"‚òÄÔ∏è":"üåô",localStorage.setItem("theme",isDark?"dark":"light")}function setupThemeToggle(){const toggleBtn=document.getElementById("themeToggle"),body=document.body;toggleBtn&&("dark"===localStorage.getItem("theme")?(body.classList.add("dark-theme"),toggleBtn.textContent="‚òÄÔ∏è"):(body.classList.remove("dark-theme"),toggleBtn.textContent="üåô"),toggleBtn.removeEventListener("click",handleThemeToggle),toggleBtn.addEventListener("click",handleThemeToggle))}function clearAddressForm(form){form.endereco&&(form.endereco.value=""),form.estado&&(form.estado.value="")}async function searchCep(event){const form=event.target.form,cepInput=form.cep;let cep=cepInput.value.replace(/\D/g,"");if(9!==cep.length)return void clearAddressForm(form);const url=`https://viacep.com.br/ws/${cep}/json/`;clearAddressForm(form);try{const response=await fetch(url),data=await response.json();data.erro?(alert("CEP n√£o encontrado."),cepInput.focus()):(form.endereco.value=`${data.logradouro||""}, ${data.bairro||""}`,form.estado.value=data.uf||"",form.endereco.focus())}catch(error){console.error("Erro ao buscar o CEP:",error)}}function isCpfLengthValid(cpf){return 14===(cpf=cpf.replace(/[^\d]/g,"")).length&&!/^(\d)\1+$/.test(cpf)}function isAgeValid(form){const dataNascimentoInput=form.dataNascimento.value,dataNascimento=new Date(dataNascimentoInput),hoje=new Date;let idade=hoje.getFullYear()-dataNascimento.getFullYear();const mes=hoje.getMonth()-dataNascimento.getMonth();return(mes<0||0===mes&&hoje.getDate()<dataNascimento.getDate())&&idade--,!(idade<18)||(alert("Erro: Voc√™ precisa ter pelo menos 18 anos para se cadastrar."),form.dataNascimento.focus(),!1)}function validateForm(form){const cpfInput=form.cpf;return isCpfLengthValid(cpfInput.value)?!!isAgeValid(form):(alert("Erro: O n√∫mero do CPF √© inv√°lido (deve conter 14 d√≠gitos). Verifique o preenchimento."),cpfInput.focus(),!1)}function renderCadastroTemplate(cadastro){return`\n        <div class="card">\n            <h3>${cadastro.nome}</h3>\n            <p>Email: ${cadastro.email}</p>\n            <p>CPF: ${cadastro.cpf}</p>\n            <p>Telefone: ${cadastro.telefone}</p>\n            <p>Endere√ßo: ${cadastro.endereco} - ${cadastro.estado}</p>\n            <p>Interesse: ${cadastro.interesses}</p>\n            <p class="data-cadastro">Cadastrado em: ${cadastro.dataCadastro}</p>\n        </div>\n    `}function listarCadastros(){document.querySelector("main").innerHTML='<article class="cadastro-list-section"><h1>Lista de Cadastros</h1><div id="cadastroLista" class="card-container"></div></article>';const lista=document.querySelector("#cadastroLista");if(lista){const dados=JSON.parse(localStorage.getItem("cadastro")||"[]");dados.length>0?lista.innerHTML=dados.map(renderCadastroTemplate).join(""):lista.innerHTML="<p>Nenhum cadastro encontrado. Cadastre-se na se√ß√£o Cadastro!</p>"}}function handleSubmit(event){event.preventDefault();const form=document.getElementById("cadastro");if(!validateForm(form))return;const formData={nome:form.nome.value,cpf:form.cpf.value,email:form.email.value,telefone:form.telefone.value,dataNascimento:form.dataNascimento.value,endereco:form.endereco.value,cep:form.cep.value,estado:form.estado.value,interesses:form.interesses.value,dataCadastro:(new Date).toLocaleDateString()};let cadastro=JSON.parse(localStorage.getItem("cadastro")||"[]");cadastro.push(formData),localStorage.setItem("cadastro",JSON.stringify(cadastro));const sucessMessage=document.getElementById("sucessMessage");sucessMessage.classList.add("show"),sucessMessage.scrollIntoView({behavior:"smooth",block:"center"}),form.reset()}async function loadPage(pageName){const main=document.querySelector("main");if("listacadastros"===pageName)return listarCadastros(),void history.pushState(null,"","/listacadastros");try{const response=await fetch(`${pageName}.html`);if(!response.ok)throw new Error("P√°gina n√£o encontrada.");const html=await response.text(),parser=new DOMParser,newMainContent=parser.parseFromString(html,"text/html").querySelector("main").innerHTML;main.innerHTML=newMainContent,history.pushState(null,"",`/${pageName}.html`),attachFormListeners()}catch(error){main.innerHTML=`<h1>Erro ao carregar a p√°gina.</h1><p>Verifique se o arquivo ${pageName}.html existe.</p>`,console.error("Erro ao carregar a p√°gina:",error)}}function setupSpaNavigation(){document.body.addEventListener("click",event=>{const link=event.target.closest("a");if(link&&link.getAttribute("href")&&!link.hasAttribute("target")){const href=link.getAttribute("href");if(href.endsWith(".html")){event.preventDefault();loadPage(href.split("/").pop().replace(".html",""))}}}),window.addEventListener("popstate",()=>{loadPage(window.location.pathname.split("/").pop().replace(".html","")||"index")})}function attachFormListeners(){setupThemeToggle();const menuToggleBtn=document.querySelector(".dropdown-btn");menuToggleBtn&&(menuToggleBtn.removeEventListener("click",toggleMenu),menuToggleBtn.addEventListener("click",toggleMenu));const navMenu=document.getElementById("navMenu");navMenu&&(navMenu.removeEventListener("click",handleMenuLinkClick),navMenu.addEventListener("click",handleMenuLinkClick));const cadastroForm=document.getElementById("cadastro");cadastroForm&&(cadastroForm.removeEventListener("submit",handleSubmit),cadastroForm.addEventListener("submit",handleSubmit));const cepInput=document.getElementById("cep");cepInput&&(cepInput.removeEventListener("blur",searchCep),cepInput.addEventListener("blur",searchCep))}document.addEventListener("DOMContentLoaded",()=>{setupSpaNavigation(),attachFormListeners();const initialPage=window.location.pathname.split("/").pop().replace(".html","")||"index";"index"!==initialPage&&""!==initialPage&&loadPage(initialPage)});